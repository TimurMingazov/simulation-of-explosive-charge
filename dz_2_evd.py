import streamlit as st
import math
import numpy as np

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
st.set_page_config(
    page_title="–õ–∞–∑–µ—Ä–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ - –†–∞—Å—á–µ—Ç—ã",
    page_icon="üî¨",
    layout="wide"
)


class MaterialProperties:
    """–ö–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"""

    def __init__(self, name, density, conductivity, heat_capacity,
                 melt_temp, boil_temp, melt_heat, vapor_heat, reflection,
                 absorption_coef=None, absorption_capacity=None, destruction_temp=None):
        self.name = name
        self.rho = density * 1000  # –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ –∫–≥/–º¬≥
        self.k = conductivity
        self.c = heat_capacity
        # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ None –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤ –ö–µ–ª—å–≤–∏–Ω—ã
        self.T_melt = (melt_temp) if melt_temp is not None else None
        self.T_boil = (boil_temp) if boil_temp is not None else None
        self.L_melt = melt_heat * 1e6 if melt_heat is not None else None  # –î–∂/–∫–≥
        self.L_vapor = vapor_heat * 1e6 if vapor_heat is not None else None  # –î–∂/–∫–≥
        self.R = reflection
        self.alpha = absorption_coef * 100 if absorption_coef else None  # –ø–µ—Ä–µ–≤–æ–¥–∏–º –≤ –º‚Åª¬π
        self.A = absorption_capacity
        self.T_destruction = (destruction_temp) if destruction_temp else None


# –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
materials_db = {
    # –ú–µ—Ç–∞–ª–ª—ã
    '–ê–ª—é–º–∏–Ω–∏–π': MaterialProperties('–ê–ª—é–º–∏–Ω–∏–π', 2.7, 233, 920, 660, 2447, 0.396, 10.9, 0.93),
    '–ó–æ–ª–æ—Ç–æ': MaterialProperties('–ó–æ–ª–æ—Ç–æ', 19.3, 300, 128, 1063, 2700, 0.065, 1.65, 0.98),
    '–í–∏—Å–º—É—Ç': MaterialProperties('–í–∏—Å–º—É—Ç', 9.7, 8, 122, 271, 1599, 0.052, 0.72, 0.55),
    '–•—Ä–æ–º': MaterialProperties('–•—Ä–æ–º', 7.1, 45, 460, 1903, 2642, 0.28, 6.71, 0.57),
    '–ú–µ–¥—å': MaterialProperties('–ú–µ–¥—å', 8.2, 373, 386, 1083, 2595, 0.205, 4.78, 0.91),
    '–ñ–µ–ª–µ–∑–æ': MaterialProperties('–ñ–µ–ª–µ–∑–æ', 7.9, 50, 450, 1535, 2900, 0.278, 7, 0.63),
    '–ù–∏–∫–µ–ª—å': MaterialProperties('–ù–∏–∫–µ–ª—å', 8.7, 68, 440, 1453, 2800, 0.303, 6.48, 0.74),
    '–í–∞–Ω–∞–¥–∏–π': MaterialProperties('–í–∞–Ω–∞–¥–∏–π', 6, 31, 514, 1730, 3400, 0.344, 8.98, 0.55),
    '–í–æ–ª—å—Ñ—Ä–∞–º': MaterialProperties('–í–æ–ª—å—Ñ—Ä–∞–º', 19.3, 190, 105, 3380, 5530, 0.191, 4.35, 0.68),

    # –ù–µ–º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
    '–§–∞–Ω–µ—Ä–∞': MaterialProperties('–§–∞–Ω–µ—Ä–∞', 0.9, 0.5, 2500, None, None, None, None, None,
                                 100, 0.8, 1800),
    '–°—Ç–µ–∫–ª–æ': MaterialProperties('–°—Ç–µ–∫–ª–æ', 2.3, 0.75, 800, None, None, None, None, None,
                                 None, 0.9, 1700),
    '–ö–µ—Ä–∞–º–∏–∫–∞': MaterialProperties('–ö–µ—Ä–∞–º–∏–∫–∞', 1.5, 0.8, 600, None, None, None, None, None,
                                   100, 0.9, 1500),
    '–†–µ–∑–∏–Ω–∞': MaterialProperties('–†–µ–∑–∏–Ω–∞', 1.2, 0.15, 900, None, None, None, None, None,
                                 None, None, 900),
}


def solve_task1(variant):
    """–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ 1: –û—Ü–µ–Ω–∫–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –º–æ—â–Ω–æ—Å—Ç–∏"""
    tau_values = [1e-3, 1e-7, 1e-5, 1e-9, 1e-4, 1e-6, 1e-12, 1e-8, 1e-14, 1e-10]
    tau = tau_values[variant - 1]

    materials = ['–ê–ª—é–º–∏–Ω–∏–π', '–ú–µ–¥—å', '–í–æ–ª—å—Ñ—Ä–∞–º', '–ñ–µ–ª–µ–∑–æ']
    lambda_wave = 1.064e-6  # –º

    st.markdown("---")
    st.subheader(f"üìä –ó–ê–î–ê–ß–ê 1 (–í–∞—Ä–∏–∞–Ω—Ç {variant})")

    st.write("–û—Ü–µ–Ω–∏—Ç—å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏ –ª–∞–∑–µ—Ä–Ω–æ–≥–æ –∏–∑–ª—É—á–µ–Ω–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –Ω–∞–≥—Ä–µ–≤–∞–Ω–∏—è"
             " –∞–ª—é–º–∏–Ω–∏—è, –º–µ–¥–∏, –≤–æ–ª—å—Ñ—Ä–∞–º–∞, –∂–µ–ª–µ–∑–∞ –¥–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä –ø–ª–∞–≤–ª–µ–Ω–∏—è –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä –∫–∏–ø–µ–Ω–∏—è "
             "–∏–∑–ª—É—á–µ–Ω–∏–µ–º –ª–∞–∑–µ—Ä–∞ —Å –¥–ª–∏–Ω–æ–π –≤–æ–ª–Ω—ã Œª=1.064 –º–∫–º –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–º–ø—É–ª—å—Å–∞ œÑ.")

    with st.expander("–î–∞–Ω–æ", expanded=True):
        st.write(f"**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–º–ø—É–ª—å—Å–∞:** œÑ = {tau:.2e} —Å")
        st.write(f"**–î–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã:** Œª = {lambda_wave} –º")

    st.write("**–ù–∞–π—Ç–∏:** –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏ –¥–ª—è –Ω–∞–≥—Ä–µ–≤–∞ –¥–æ T_–ø–ª–∞–≤–ª–µ–Ω–∏—è –∏ T_–∫–∏–ø–µ–Ω–∏—è")

    with st.expander("–†–µ—à–µ–Ω–∏–µ", expanded=True):
        results = []
        for material_name in materials:
            mat = materials_db[material_name]

            # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–≥–ª–æ—â–µ–Ω–∏—è (1-R)
            A = 1 - mat.R

            # –¢–µ–ø–ª–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç—å
            alpha_thermal = mat.k / (mat.rho * mat.c)  # –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç–∏

            formula = "q‚ÇÄ = (T¬∑k¬∑‚àöœÄ)/(2¬∑A¬∑‚àö(Œ±œÑ))"

            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º –Ω–∞–≥—Ä–µ–≤–∞
            delta_T_melt = mat.T_melt  # —Ä–∞–∑–Ω–æ—Å—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä
            q0_melt = (delta_T_melt * mat.k * (math.pi ** (1 / 2))) / (2 * A * alpha_thermal** (1 / 2) * tau ** (1 / 2))

            delta_T_boil = mat.T_boil
            q0_boil = (delta_T_boil * mat.k * (math.pi ** (1 / 2))) / (2 * A * (alpha_thermal * tau) ** (1 / 2))

            results.append({
                'material': material_name,
                'q0_melt': q0_melt,
                'q0_boil': q0_boil,
                'formula': formula,
            })

            st.markdown(f"**{material_name}:**")
            st.write(f"- –§–æ—Ä–º—É–ª–∞: {formula}")
            st.write(f"- q‚ÇÄ(–ø–ª–∞–≤–ª–µ–Ω–∏–µ) = {q0_melt:.2e} –í—Ç/–º¬≤")
            st.write(f"- q‚ÇÄ(–∫–∏–ø–µ–Ω–∏–µ) = {q0_boil:.2e} –í—Ç/–º¬≤")

    st.success("**–û–¢–í–ï–¢:**")
    for res in results:
        st.write(f"**{res['material']}:** q‚ÇÄ_–ø–ª–∞–≤ = {res['q0_melt']:.2e} –í—Ç/–º¬≤, q‚ÇÄ_–∫–∏–ø = {res['q0_boil']:.2e} –í—Ç/–º¬≤")


def solve_task2(variant):
    """–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ 2: –¢–æ–ª—â–∏–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ —Å–ª–æ—è"""
    materials_list = ['–§–∞–Ω–µ—Ä–∞', '–°—Ç–µ–∫–ª–æ', '–ö–µ—Ä–∞–º–∏–∫–∞', '–•—Ä–æ–º', '–ù–∏–∫–µ–ª—å', '–í–∞–Ω–∞–¥–∏–π', '–ó–æ–ª–æ—Ç–æ', '–ê–ª—é–º–∏–Ω–∏–π', '–†–µ–∑–∏–Ω–∞',
                      '–ú–µ–¥—å']
    material_name = materials_list[variant - 1]
    mat = materials_db[material_name]

    st.markdown("---")
    st.subheader(f"üìè –ó–ê–î–ê–ß–ê 2 (–í–∞—Ä–∏–∞–Ω—Ç {variant})")

    st.write("–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ–ª—â–∏–Ω—É –ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ —Å–ª–æ—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–∏ –Ω–∞ –Ω–∏—Ö –∏–∑–ª—É—á–µ–Ω–∏—è –ª–∞–∑–µ—Ä–æ–≤:"
             "–∞) Nd:YAG –≤ –∏–º–ø—É–ª—å—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏–º–ø—É–ª—å—Å–∞ œÑ=10^(-6) c; "
             "–±) Nd:YAG –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è 40 —Å–º/—Å –∏ –¥–∏–∞–º–µ—Ç—Ä–æ–º –æ–±–ª—É—á–µ–Ω–Ω–æ–π –∑–æ–Ω—ã 10 –º–∫–º.")

    with st.expander("–î–∞–Ω–æ", expanded=True):
        st.write(f"**–ú–∞—Ç–µ—Ä–∏–∞–ª:** {material_name}")
        st.write("**–∞) –ò–º–ø—É–ª—å—Å–Ω—ã–π —Ä–µ–∂–∏–º:** œÑ = 1e-6 —Å")
        st.write("**–±) –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ä–µ–∂–∏–º:** V_—Å–∫ = 40 —Å–º/—Å, d = 10 –º–∫–º")

    st.write("**–ù–∞–π—Ç–∏:** –¢–æ–ª—â–∏–Ω—É –ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ —Å–ª–æ—è")

    with st.expander("–†–µ—à–µ–Ω–∏–µ", expanded=True):
        # –∞) –ò–º–ø—É–ª—å—Å–Ω—ã–π —Ä–µ–∂–∏–º
        tau_impulse = 1e-6
        V_scan = 0.4  # –º/—Å
        d = 0.00001
        tau_eff = d / V_scan
        alpha_thermal = mat.k / (mat.rho * mat.c)
        depth_impulse = math.sqrt(alpha_thermal * tau_impulse)
        depth_continuous = math.sqrt(alpha_thermal * tau_eff)

        st.markdown("**–∞) –ò–º–ø—É–ª—å—Å–Ω—ã–π —Ä–µ–∂–∏–º:**")
        st.write(f"- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç–∏: Œ± = {alpha_thermal:.2e} –º¬≤/—Å")
        st.write(f"- –§–æ—Ä–º—É–ª–∞: Œ¥ = ‚àö(Œ±œÑ)")
        st.write(f"- Œ¥ = ‚àö({alpha_thermal:.2e} √ó {tau_impulse:.2e})")

        # –±) –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ä–µ–∂–∏–º
        st.markdown("**–∞) –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ä–µ–∂–∏–º:**")
        st.write(f"- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç–∏: Œ± = {alpha_thermal:.2e} –º¬≤/—Å")
        st.write(f"- –§–æ—Ä–º—É–ª–∞: Œ¥ = ‚àö(Œ±œÑ_—ç—Ñ—Ñ)")
        st.write(f"- –§–æ—Ä–º—É–ª–∞: œÑ_—ç—Ñ—Ñ= d0/v_—Å–∫ = {tau_eff}")
        st.write(f"- Œ¥ = ‚àö({alpha_thermal:.2e} √ó {tau_eff:.2e})")

    st.success("**–û–¢–í–ï–¢:**")
    col1, col2 = st.columns(2)
    with col1:
        st.write(f"**–∞) –ò–º–ø—É–ª—å—Å–Ω—ã–π —Ä–µ–∂–∏–º:**")
        st.write(f"Œ¥ = {depth_impulse:.2e} –º")
        st.write(f"= {depth_impulse * 1e6:.2f} –º–∫–º")
    with col2:
        st.write(f"**–±) –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ä–µ–∂–∏–º:**")
        st.write(f"Œ¥ = {depth_continuous:.2e} –º")
        st.write(f"= {depth_continuous * 1e6:.2f} –º–∫–º")


def solve_task3(variant):
    """–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ 3: –ò—Å–ø–∞—Ä–µ–Ω–∏–µ –≤–æ–ª—å—Ñ—Ä–∞–º–∞"""
    P_values = [200, 500, 400, 550, 600, 450, 800, 950, 1000, 1100]
    f_values = [0.05, 0.04, 0.06, 0.05, 0.07, 0.04, 0.02, 0.04, 0.02, 0.02]  # –º
    theta_values = [2e-3, 1e-3, 2e-3, 1e-3, 2e-3, 1e-3, 5e-3, 2e-3, 20e-3, 5e-3]  # —Ä–∞–¥

    P = P_values[variant - 1]
    f = f_values[variant - 1]
    theta = theta_values[variant - 1]
    lambda_wave = 1.064e-6

    mat = materials_db['–í–æ–ª—å—Ñ—Ä–∞–º']

    st.markdown("---")
    st.subheader(f"üî• –ó–ê–î–ê–ß–ê 3 (–í–∞—Ä–∏–∞–Ω—Ç {variant})")

    st.write(f"–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–∞—Ä–µ–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –≤–æ–ª—å—Ñ—Ä–∞–º–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ –Ω–µ–π"
             f"–ø—É—á–∫–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ Nd:YAG-–ª–∞–∑–µ—Ä–∞ –º–æ—â–Ω–æ—Å—Ç—å—é P (—Ñ–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã f=5 —Å–º) "
             f"–ø—Ä–∏ —Ä–∞—Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—É—á–∫–∞ Œ∏.")

    with st.expander("–î–∞–Ω–æ", expanded=True):
        st.write(f"**–ú–æ—â–Ω–æ—Å—Ç—å –ª–∞–∑–µ—Ä–∞:** P = {P} –í—Ç")
        st.write(f"**–§–æ–∫—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ:** f = {f * 100} —Å–º")
        st.write(f"**–†–∞—Å—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—É—á–∫–∞:** Œ∏ = {theta * 1000} –º—Ä–∞–¥")
        st.write(f"**–î–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã:** Œª = {lambda_wave} –º")
        st.write(f"**–ú–∞—Ç–µ—Ä–∏–∞–ª:** –í–æ–ª—å—Ñ—Ä–∞–º")

    st.write("**–ù–∞–π—Ç–∏:** –ü—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–∞—Ä–µ–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏")

    with st.expander("–†–µ—à–µ–Ω–∏–µ", expanded=True):
        # –†–∞–¥–∏—É—Å –ø—è—Ç–Ω–∞ –≤ —Ñ–æ–∫—É—Å–µ
        r0 = f * theta
        st.write(f"**–†–∞–¥–∏—É—Å –ø—è—Ç–Ω–∞:** r‚ÇÄ = f¬∑Œ∏ = {f} √ó {theta} = {r0:.2e} –º")

        # –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏
        q0 = P / (math.pi * r0 ** 2)
        st.write(f"**–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏:** q‚ÇÄ = P/(œÄr‚ÇÄ¬≤) = {P}/(œÄ√ó{r0 ** 2:.2e}) = {q0:.2e} –í—Ç/–º¬≤")

        # –ú–æ—â–Ω–æ—Å—Ç—å –≤—Ç–æ—Ä–∞—è
        A = 1 - mat.R
        q0_min = mat.T_boil * mat.k / (A * r0)
        st.write(f"**–ú–æ—â–Ω–æ—Å—Ç—å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è**: q0–Ω–µ–ø = T¬∑k/(A¬∑r0) = {q0_min:.2e} –í—Ç/–º¬≤")

        will_evaporate = q0 > q0_min

    if will_evaporate:
        st.success("**–û–¢–í–ï–¢: –î–ê, –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–∞—Ä–µ–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –≤–æ–ª—å—Ñ—Ä–∞–º–∞**")
        st.write(f"–¢–∞–∫ –∫–∞–∫ q_eff ({q0:.2e} –í—Ç/–º¬≤) > q_min ({q0_min:.2e} –í—Ç/–º¬≤)")
    else:
        st.error("**–û–¢–í–ï–¢: –ù–ï–¢, –ª–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–∞—Ä–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç**")
        st.write(f"–¢–∞–∫ –∫–∞–∫ q_eff ({q0:.2e} –í—Ç/–º¬≤) < q_min ({q0_min:.2e} –í—Ç/–º¬≤)")


def solve_task4(variant):
    """–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ 4: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è"""
    materials_list = ['–ê–ª—é–º–∏–Ω–∏–π', '–ó–æ–ª–æ—Ç–æ', '–í–∏—Å–º—É—Ç', '–•—Ä–æ–º', '–ú–µ–¥—å', '–ñ–µ–ª–µ–∑–æ', '–ù–∏–∫–µ–ª—å', '–í–∞–Ω–∞–¥–∏–π', '–í–æ–ª—å—Ñ—Ä–∞–º',
                      '–ê–ª—é–º–∏–Ω–∏–π']
    material_name = materials_list[variant - 1]
    mat = materials_db[material_name]

    P0 = 100  # –í—Ç
    r0 = 30e-6  # –º

    st.markdown("---")
    st.subheader(f"‚è±Ô∏è –ó–ê–î–ê–ß–ê 4 (–í–∞—Ä–∏–∞–Ω—Ç {variant})")
    st.write(f"–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ "
             f"–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–º –∏–∑–ª—É—á–µ–Ω–∏–µ–º Nd:YAG-–ª–∞–∑–µ—Ä–∞ –º–æ—â–Ω–æ—Å—Ç—å—é P_0=100 –í—Ç –ø—Ä–∏ —Ä–∞–¥–∏—É—Å–µ –æ–±–ª–∞—Å—Ç–∏ r_0=30 –º–∫–º.")

    with st.expander("–î–∞–Ω–æ", expanded=True):
        st.write(f"**–ú–æ—â–Ω–æ—Å—Ç—å –ª–∞–∑–µ—Ä–∞:** P‚ÇÄ = {P0} –í—Ç")
        st.write(f"**–†–∞–¥–∏—É—Å –æ–±–ª–∞—Å—Ç–∏:** r‚ÇÄ = {r0 * 1e6} –º–∫–º")
        st.write(f"**–ú–∞—Ç–µ—Ä–∏–∞–ª:** {material_name}")

    st.write("**–ù–∞–π—Ç–∏:** –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞")

    with st.expander("–†–µ—à–µ–Ω–∏–µ", expanded=True):
        alpha = mat.k / (mat.rho * mat.c)
        # –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏
        q0 = P0 / (math.pi * r0 ** 2)
        A = 1 - mat.R
        tau = ((math.pi * r0 ** 2 * mat.rho * alpha ** 0.5 * (mat.c * mat.T_boil + mat.L_vapor)) / (P0 * A)) ** 2
        st.write(f"E–≤—á=–ï–∑–∞—Ç—Ä")
        st.write(f"q‚ÇÄ¬∑A¬∑œÑ = œÅ¬∑c¬∑‚àö(aœÑ)¬∑–¢–∏—Å–ø+œÅ¬∑‚àö(aœÑ)¬∑L–∏—Å–ø")
        st.write(f"**–í—Ä–µ–º—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è:** œÑ = [œÄ¬∑r¬≤¬∑œÅ¬∑(c¬∑–¢–∏—Å–ø+L–∏—Å–ø)¬∑‚àöa/(P¬∑A)]¬≤ = {tau:.2e} –í—Ç/–º¬≤")


    st.success("**–û–¢–í–ï–¢:**")
    st.write(f"**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è {material_name}:**")
    st.metric("–í—Ä–µ–º—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è", f"{tau:.2e} —Å", f"{tau * 1e3:.2f} –º—Å")


def run():
    # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    st.title("üî¨ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ª–∞–∑–µ—Ä–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π")
    st.markdown("---")

    # –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞
    with st.sidebar:
        st.header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏")
        variant = st.selectbox(
            "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞:",
            options=list(range(1, 11)),
            index=0
        )

        st.markdown("---")
        st.subheader("–û –ø—Ä–æ–≥—Ä–∞–º–º–µ")
        st.info("""
        –≠—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏ –ø–æ –ª–∞–∑–µ—Ä–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º:
        - –ó–∞–¥–∞—á–∞ 1: –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏ –¥–ª—è –Ω–∞–≥—Ä–µ–≤–∞
        - –ó–∞–¥–∞—á–∞ 2: –¢–æ–ª—â–∏–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Ç–æ–≥–æ —Å–ª–æ—è
        - –ó–∞–¥–∞—á–∞ 3: –ò—Å–ø–∞—Ä–µ–Ω–∏–µ –≤–æ–ª—å—Ñ—Ä–∞–º–∞
        - –ó–∞–¥–∞—á–∞ 4: –í—Ä–µ–º—è –∏—Å–ø–∞—Ä–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
        """)

    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
    st.header(f"–†–µ—à–µ–Ω–∏—è –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ {variant}")

    # –°–æ–∑–¥–∞–µ–º –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
    tab1, tab2, tab3, tab4 = st.tabs([
        "üìä –ó–∞–¥–∞—á–∞ 1",
        "üìè –ó–∞–¥–∞—á–∞ 2",
        "üî• –ó–∞–¥–∞—á–∞ 3",
        "‚è±Ô∏è –ó–∞–¥–∞—á–∞ 4"
    ])

    with tab1:
        solve_task1(variant)

    with tab2:
        solve_task2(variant)

    with tab3:
        solve_task3(variant)

    with tab4:
        solve_task4(variant)

    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö
    st.markdown("---")
    with st.expander("üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"):
        st.subheader("–ú–µ—Ç–∞–ª–ª—ã")
        metals_data = []
        for name, mat in materials_db.items():
            if mat.T_melt is not None:  # –≠—Ç–æ –º–µ—Ç–∞–ª–ª
                metals_data.append({
                    '–ú–∞—Ç–µ—Ä–∏–∞–ª': name,
                    '–ü–ª–æ—Ç–Ω–æ—Å—Ç—å (–∫–≥/–º¬≥)': f"{mat.rho:.0f}",
                    '–¢–µ–ø–ª–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç—å (–í—Ç/–º¬∑–ö)': f"{mat.k:.0f}",
                    '–¢–µ–ø–ª–æ–µ–º–∫–æ—Å—Ç—å (–î–∂/–∫–≥¬∑–ö)': f"{mat.c:.0f}",
                    'T –ø–ª–∞–≤–ª–µ–Ω–∏—è (¬∞C)': f"{mat.T_melt:.0f}",
                    'T –∫–∏–ø–µ–Ω–∏—è (¬∞C)': f"{mat.T_boil:.0f}",
                    '–ö–æ—ç—Ñ. –æ—Ç—Ä–∞–∂–µ–Ω–∏—è': f"{mat.R:.2f}"
                })

        st.table(metals_data)